erp-access-control-go % make demo
🎯 ERP Access Control API 権限管理システムデモ開始...
📋 前提条件チェック:
✅ サーバーが起動中です


=============================================================================
         ERP Access Control API - 権限管理システム デモンストレーション
=============================================================================


🎯 実演内容:
  1. Department管理（階層構造・CRUD操作）
  2. Role管理（階層管理・権限割り当て）
  3. Permission管理（CRUD・マトリックス表示）
  4. ロール権限割り当て（複数権限・継承）
  5. User管理（複数ロール・期限付きロール）
  6. 権限チェック・認証（JWT・権限不足エラー）
  7. システム統計・モニタリング

📋 前提条件:
  - サーバーが http://localhost:8080 で起動済み
  - 管理者アカウント admin@example.com / password123 が利用可能

デモを開始しますか? (y/N): y

[INFO] サーバー接続確認中...
[SUCCESS] サーバーが稼働中です

━━━ サーバーヘルスチェック ━━━
{
  "service": "erp-access-control-api",
  "status": "healthy",
  "timestamp": "2025-07-27T17:55:54Z",
  "version": "0.1.0-dev"
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 管理者ログイン
[SUCCESS] 管理者ログイン成功

━━━ ログインレスポンス ━━━
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiODgwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAxIiwiZW1haWwiOiJhZG1pbkBleGFtcGxlLmNvbSIsInBlcm1pc3Npb25zIjpbInVzZXI6cmVhZCIsInVzZXI6d3JpdGUiLCJ1c2VyOmRlbGV0ZSJdLCJwcmltYXJ5X3JvbGVfaWQiOiI2NjBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDEiLCJhY3RpdmVfcm9sZXMiOlt7ImlkIjoiNjYwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAyIiwibmFtZSI6IumDqOmWgOeuoeeQhuiAhSIsInByaW9yaXR5IjoyfSx7ImlkIjoiNjYwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAxIiwibmFtZSI6IuOCt-OCueODhuODoOeuoeeQhuiAhSIsInByaW9yaXR5IjoxfV0sImhpZ2hlc3Rfcm9sZSI6eyJpZCI6IjY2MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMiIsIm5hbWUiOiLpg6jploDnrqHnkIbogIUiLCJwcmlvcml0eSI6Mn0sImlzcyI6ImVycC1hY2Nlc3MtY29udHJvbC1hcGkiLCJzdWIiOiI4ODBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDEiLCJleHAiOjE3NTM2Mzk4NTQsIm5iZiI6MTc1MzYzODk1NCwiaWF0IjoxNzUzNjM4OTU0LCJqdGkiOiIzOWU3ZDgxOC0yMzczLTRiOGYtYTdiYy1hN2IyNjExZjZlNTYifQ.zmulpAnfGt8oxNZ4qwm1Cc3nK5J_fZUFylGvmm6d_P4",
  "token_type": "Bearer",
  "expires_in": 900,
  "user": {
    "id": "880e8400-e29b-41d4-a716-446655440001",
    "name": "システム管理者",
    "email": "admin@example.com",
    "status": "active",
    "primary_role": {
      "id": "660e8400-e29b-41d4-a716-446655440001",
      "name": "システム管理者"
    },
    "active_roles": [
      {
        "id": "660e8400-e29b-41d4-a716-446655440002",
        "name": "部門管理者",
        "priority": 2
      },
      {
        "id": "660e8400-e29b-41d4-a716-446655440001",
        "name": "システム管理者",
        "priority": 1
      }
    ],
    "highest_role": {
      "id": "660e8400-e29b-41d4-a716-446655440002",
      "name": "部門管理者",
      "priority": 2
    },
    "department": {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "name": "IT部門"
    }
  },
  "permissions": [
    "*:*",
    "role:write",
    "permission:delete",
    "department:create",
    "permission:read",
    "system:read",
    "system:write",
    "system:admin",
    "department:list",
    "user:delete",
    "permission:write",
    "permission:create",
    "user:update",
    "department:delete",
    "role:list",
    "role:create",
    "audit:read",
    "permission:list",
    "role:delete",
    "department:write",
    "user:create",
    "user:read",
    "user:write",
    "role:read",
    "department:update",
    "role:update",
    "department:read",
    "user:list",
    "audit:list"
  ],
  "active_roles": [
    {
      "id": "660e8400-e29b-41d4-a716-446655440002",
      "name": "部門管理者",
      "priority": 2
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440001",
      "name": "システム管理者",
      "priority": 1
    }
  ],
  "primary_role": {
    "id": "660e8400-e29b-41d4-a716-446655440001",
    "name": "システム管理者"
  },
  "highest_role": {
    "id": "660e8400-e29b-41d4-a716-446655440002",
    "name": "部門管理者",
    "priority": 2
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[DEMO] === 1. Department管理システム デモ ===
[STEP] 1.1 部署作成（階層構造）

━━━ 本社部署作成 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "name",
    "reason": "Department name already exists"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ 営業部作成 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "request",
    "reason": "Invalid request format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 1.2 部署階層構造取得

━━━ 部署階層構造 ━━━
{
  "departments": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "name": "IT部門"
    },
    {
      "id": "52469d7e-4e1b-49ee-b72c-674f3ca5f7bc",
      "name": "デモ本社",
      "children": [
        {
          "id": "9b781d76-a935-477c-9cd3-81d7fdfbff68",
          "name": "デモ営業部"
        }
      ]
    },
    {
      "id": "00000000-0000-0000-0000-000000000001",
      "name": "ルート部門"
    },
    {
      "id": "00000000-0000-0000-0000-000000000004",
      "name": "人事部"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440002",
      "name": "人事部門"
    },
    {
      "id": "00000000-0000-0000-0000-000000000002",
      "name": "営業部"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440003",
      "name": "営業部門"
    },
    {
      "id": "00000000-0000-0000-0000-000000000003",
      "name": "経理部"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440004",
      "name": "経理部門"
    }
  ]
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: department:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 1.3 部署一覧取得

━━━ 部署一覧 ━━━
{
  "departments": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "name": "IT部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    },
    {
      "id": "9b781d76-a935-477c-9cd3-81d7fdfbff68",
      "name": "デモ営業部",
      "parent_id": "52469d7e-4e1b-49ee-b72c-674f3ca5f7bc",
      "created_at": "2025-07-28T02:27:28+09:00",
      "parent": {
        "id": "52469d7e-4e1b-49ee-b72c-674f3ca5f7bc",
        "name": "デモ本社"
      }
    },
    {
      "id": "52469d7e-4e1b-49ee-b72c-674f3ca5f7bc",
      "name": "デモ本社",
      "created_at": "2025-07-28T02:27:28+09:00",
      "children": [
        {
          "id": "9b781d76-a935-477c-9cd3-81d7fdfbff68",
          "name": "デモ営業部"
        }
      ]
    },
    {
      "id": "00000000-0000-0000-0000-000000000001",
      "name": "ルート部門",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "00000000-0000-0000-0000-000000000004",
      "name": "人事部",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440002",
      "name": "人事部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    },
    {
      "id": "00000000-0000-0000-0000-000000000002",
      "name": "営業部",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440003",
      "name": "営業部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    },
    {
      "id": "00000000-0000-0000-0000-000000000003",
      "name": "経理部",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440004",
      "name": "経理部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    }
  ],
  "total": 10,
  "page": 1,
  "limit": 10
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: department:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[DEMO] === 2. Role管理システム デモ ===
[STEP] 2.1 ロール作成（階層構造）

━━━ システム管理者ロール作成 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "name",
    "reason": "Role name already exists"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ 営業マネージャーロール作成 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "request",
    "reason": "Invalid request format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ 一般ユーザーロール作成 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "request",
    "reason": "Invalid request format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 2.2 ロール階層構造取得

━━━ ロール階層構造 ━━━
{
  "roles": [
    {
      "id": "00000000-0000-0000-0000-000000000001",
      "name": "admin",
      "level": 0,
      "permission_count": 0,
      "user_count": 0,
      "children": [
        {
          "id": "00000000-0000-0000-0000-000000000002",
          "name": "manager",
          "level": 1,
          "permission_count": 0,
          "user_count": 0,
          "children": [
            {
              "id": "00000000-0000-0000-0000-000000000003",
              "name": "employee",
              "level": 2,
              "permission_count": 0,
              "user_count": 0
            }
          ]
        }
      ]
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440001",
      "name": "システム管理者",
      "level": 0,
      "permission_count": 23,
      "user_count": 2,
      "children": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440002",
          "name": "部門管理者",
          "level": 1,
          "permission_count": 6,
          "user_count": 3,
          "children": [
            {
              "id": "660e8400-e29b-41d4-a716-446655440006",
              "name": "テスター",
              "level": 2,
              "permission_count": 0,
              "user_count": 1
            },
            {
              "id": "660e8400-e29b-41d4-a716-446655440007",
              "name": "プロジェクトマネージャー",
              "level": 2,
              "permission_count": 6,
              "user_count": 2
            },
            {
              "id": "660e8400-e29b-41d4-a716-446655440003",
              "name": "一般ユーザー",
              "level": 2,
              "permission_count": 3,
              "user_count": 4,
              "children": [
                {
                  "id": "660e8400-e29b-41d4-a716-446655440004",
                  "name": "ゲストユーザー",
                  "level": 3,
                  "permission_count": 2,
                  "user_count": 2
                }
              ]
            },
            {
              "id": "660e8400-e29b-41d4-a716-446655440005",
              "name": "開発者",
              "level": 2,
              "permission_count": 4,
              "user_count": 4
            }
          ]
        }
      ]
    },
    {
      "id": "ef6b554b-1b8d-422c-a6cb-7b90918eb430",
      "name": "デモシステム管理者",
      "level": 0,
      "permission_count": 0,
      "user_count": 0,
      "children": [
        {
          "id": "d863af92-702b-4f5f-9e98-6de495673533",
          "name": "デモ営業マネージャー",
          "level": 1,
          "permission_count": 0,
          "user_count": 0
        }
      ]
    }
  ]
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: role:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[DEMO] === 3. Permission管理システム デモ ===
[STEP] 3.1 権限作成（モジュール別）

━━━ ユーザー作成権限 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "module_action",
    "reason": "Permission with this module and action already exists"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ 部署管理権限 ━━━
{
  "code": "INTERNAL_ERROR",
  "message": "Internal server error",
  "details": {
    "reason": "DATABASE_ERROR: Database operation failed"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ 注文データ閲覧権限 ━━━
{
  "code": "INTERNAL_ERROR",
  "message": "Internal server error",
  "details": {
    "reason": "DATABASE_ERROR: Database operation failed"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 3.2 権限マトリックス表示

━━━ 権限マトリックス ━━━
{
  "modules": [
    {
      "name": "reports",
      "display_name": "レポート",
      "actions": [
        {
          "name": "export",
          "display_name": "エクスポート",
          "permission_id": "7028fa00-b7b6-4c66-b3ab-1ccd211d8a49",
          "roles": null
        }
      ]
    },
    {
      "name": "system",
      "display_name": "システム管理",
      "actions": [
        {
          "name": "admin",
          "display_name": "管理者",
          "permission_id": "770e8400-e29b-41d4-a716-446655440015",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440013",
          "roles": [
            "システム管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440014",
          "roles": [
            "システム管理者"
          ]
        }
      ]
    },
    {
      "name": "user",
      "display_name": "ユーザー管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440020",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440003",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440016",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440001",
          "roles": [
            "ゲストユーザー",
            "システム管理者",
            "プロジェクトマネージャー",
            "一般ユーザー",
            "部門管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440002",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "部門管理者"
          ]
        }
      ]
    },
    {
      "name": "permission",
      "display_name": "権限管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440023",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440009",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440019",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440007",
          "roles": [
            "システム管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440008",
          "roles": [
            "システム管理者"
          ]
        }
      ]
    },
    {
      "name": "role",
      "display_name": "ロール管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440022",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440006",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440018",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440004",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "一般ユーザー",
            "部門管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440005",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "部門管理者"
          ]
        }
      ]
    },
    {
      "name": "department",
      "display_name": "部署管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440021",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440012",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440017",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440010",
          "roles": [
            "ゲストユーザー",
            "システム管理者",
            "プロジェクトマネージャー",
            "一般ユーザー",
            "部門管理者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440011",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "部門管理者"
          ]
        }
      ]
    },
    {
      "name": "inventory",
      "display_name": "在庫管理",
      "actions": [
        {
          "name": "update",
          "display_name": "更新",
          "permission_id": "aeb06707-7198-49a1-a98b-0bdca4d0e0ba",
          "roles": null
        },
        {
          "name": "view",
          "display_name": "表示",
          "permission_id": "5eeee496-9a9b-4c01-8261-1770990ee5e7",
          "roles": null
        }
      ]
    },
    {
      "name": "orders",
      "display_name": "注文管理",
      "actions": [
        {
          "name": "approve",
          "display_name": "承認",
          "permission_id": "6f6e0538-0f9c-41a4-baca-92e04dc41de3",
          "roles": null
        },
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "b75e89b7-818e-4a25-ae33-05a586e6f330",
          "roles": null
        }
      ]
    }
  ],
  "summary": {
    "total_permissions": 28,
    "total_modules": 8,
    "total_actions": 10,
    "unused_permissions": 5
  }
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: permission:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 3.3 権限一覧取得（ページング・検索）

━━━ 権限一覧（user検索） ━━━
{
  "permissions": [
    {
      "id": "770e8400-e29b-41d4-a716-446655440020",
      "module": "user",
      "action": "create",
      "code": "user:create",
      "description": "ユーザー管理作成権限",
      "is_system": false,
      "created_at": "2025-07-28T02:27:01Z",
      "roles": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440001",
          "name": "システム管理者",
          "user_count": 1
        }
      ],
      "usage_stats": {
        "role_count": 1,
        "user_count": 1,
        "last_used": "2025-07-28T02:27:01Z"
      }
    },
    {
      "id": "770e8400-e29b-41d4-a716-446655440003",
      "module": "user",
      "action": "delete",
      "code": "user:delete",
      "description": "ユーザー管理削除権限",
      "is_system": false,
      "created_at": "2025-07-28T02:27:01Z",
      "roles": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440001",
          "name": "システム管理者",
          "user_count": 1
        }
      ],
      "usage_stats": {
        "role_count": 1,
        "user_count": 1,
        "last_used": "2025-07-28T02:27:01Z"
      }
    },
    {
      "id": "770e8400-e29b-41d4-a716-446655440016",
      "module": "user",
      "action": "list",
      "code": "user:list",
      "description": "ユーザー管理一覧権限",
      "is_system": true,
      "created_at": "2025-07-28T02:27:01Z",
      "roles": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440001",
          "name": "システム管理者",
          "user_count": 1
        }
      ],
      "usage_stats": {
        "role_count": 1,
        "user_count": 1,
        "last_used": "2025-07-28T02:27:01Z"
      }
    },
    {
      "id": "770e8400-e29b-41d4-a716-446655440001",
      "module": "user",
      "action": "read",
      "code": "user:read",
      "description": "ユーザー管理閲覧権限",
      "is_system": true,
      "created_at": "2025-07-28T02:27:01Z",
      "roles": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440004",
          "name": "ゲストユーザー",
          "user_count": 1
        },
        {
          "id": "660e8400-e29b-41d4-a716-446655440001",
          "name": "システム管理者",
          "user_count": 1
        },
        {
          "id": "660e8400-e29b-41d4-a716-446655440007",
          "name": "プロジェクトマネージャー",
          "user_count": 1
        },
        {
          "id": "660e8400-e29b-41d4-a716-446655440003",
          "name": "一般ユーザー",
          "user_count": 2
        },
        {
          "id": "660e8400-e29b-41d4-a716-446655440002",
          "name": "部門管理者",
          "user_count": 1
        },
        {
          "id": "660e8400-e29b-41d4-a716-446655440005",
          "name": "開発者",
          "user_count": 2
        }
      ],
      "usage_stats": {
        "role_count": 6,
        "user_count": 6,
        "last_used": "2025-07-28T02:27:01Z"
      }
    },
    {
      "id": "770e8400-e29b-41d4-a716-446655440002",
      "module": "user",
      "action": "write",
      "code": "user:write",
      "description": "ユーザー管理write権限",
      "is_system": false,
      "created_at": "2025-07-28T02:27:01Z",
      "roles": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440001",
          "name": "システム管理者",
          "user_count": 1
        },
        {
          "id": "660e8400-e29b-41d4-a716-446655440007",
          "name": "プロジェクトマネージャー",
          "user_count": 1
        },
        {
          "id": "660e8400-e29b-41d4-a716-446655440002",
          "name": "部門管理者",
          "user_count": 1
        }
      ],
      "usage_stats": {
        "role_count": 3,
        "user_count": 2,
        "last_used": "2025-07-28T02:27:01Z"
      }
    }
  ],
  "total": 5,
  "page": 1,
  "limit": 10,
  "total_pages": 1
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: permission:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 3.4 モジュール別権限取得

━━━ userモジュール権限 ━━━
{
  "module": "user",
  "permissions": {
    "module": "user",
    "display_name": "ユーザー管理",
    "permissions": [
      {
        "id": "770e8400-e29b-41d4-a716-446655440020",
        "module": "user",
        "action": "create",
        "code": "user:create",
        "description": "ユーザー管理作成権限",
        "is_system": false,
        "created_at": "2025-07-28T02:27:01Z",
        "roles": [
          {
            "id": "660e8400-e29b-41d4-a716-446655440001",
            "name": "システム管理者",
            "user_count": 1
          }
        ],
        "usage_stats": {
          "role_count": 1,
          "user_count": 1,
          "last_used": "2025-07-28T02:27:01Z"
        }
      },
      {
        "id": "770e8400-e29b-41d4-a716-446655440003",
        "module": "user",
        "action": "delete",
        "code": "user:delete",
        "description": "ユーザー管理削除権限",
        "is_system": false,
        "created_at": "2025-07-28T02:27:01Z",
        "roles": [
          {
            "id": "660e8400-e29b-41d4-a716-446655440001",
            "name": "システム管理者",
            "user_count": 1
          }
        ],
        "usage_stats": {
          "role_count": 1,
          "user_count": 1,
          "last_used": "2025-07-28T02:27:01Z"
        }
      },
      {
        "id": "770e8400-e29b-41d4-a716-446655440016",
        "module": "user",
        "action": "list",
        "code": "user:list",
        "description": "ユーザー管理一覧権限",
        "is_system": true,
        "created_at": "2025-07-28T02:27:01Z",
        "roles": [
          {
            "id": "660e8400-e29b-41d4-a716-446655440001",
            "name": "システム管理者",
            "user_count": 1
          }
        ],
        "usage_stats": {
          "role_count": 1,
          "user_count": 1,
          "last_used": "2025-07-28T02:27:01Z"
        }
      },
      {
        "id": "770e8400-e29b-41d4-a716-446655440001",
        "module": "user",
        "action": "read",
        "code": "user:read",
        "description": "ユーザー管理閲覧権限",
        "is_system": true,
        "created_at": "2025-07-28T02:27:01Z",
        "roles": [
          {
            "id": "660e8400-e29b-41d4-a716-446655440004",
            "name": "ゲストユーザー",
            "user_count": 1
          },
          {
            "id": "660e8400-e29b-41d4-a716-446655440001",
            "name": "システム管理者",
            "user_count": 1
          },
          {
            "id": "660e8400-e29b-41d4-a716-446655440007",
            "name": "プロジェクトマネージャー",
            "user_count": 1
          },
          {
            "id": "660e8400-e29b-41d4-a716-446655440003",
            "name": "一般ユーザー",
            "user_count": 2
          },
          {
            "id": "660e8400-e29b-41d4-a716-446655440002",
            "name": "部門管理者",
            "user_count": 1
          },
          {
            "id": "660e8400-e29b-41d4-a716-446655440005",
            "name": "開発者",
            "user_count": 2
          }
        ],
        "usage_stats": {
          "role_count": 6,
          "user_count": 6,
          "last_used": "2025-07-28T02:27:01Z"
        }
      },
      {
        "id": "770e8400-e29b-41d4-a716-446655440002",
        "module": "user",
        "action": "write",
        "code": "user:write",
        "description": "ユーザー管理write権限",
        "is_system": false,
        "created_at": "2025-07-28T02:27:01Z",
        "roles": [
          {
            "id": "660e8400-e29b-41d4-a716-446655440001",
            "name": "システム管理者",
            "user_count": 1
          },
          {
            "id": "660e8400-e29b-41d4-a716-446655440007",
            "name": "プロジェクトマネージャー",
            "user_count": 1
          },
          {
            "id": "660e8400-e29b-41d4-a716-446655440002",
            "name": "部門管理者",
            "user_count": 1
          }
        ],
        "usage_stats": {
          "role_count": 3,
          "user_count": 2,
          "last_used": "2025-07-28T02:27:01Z"
        }
      }
    ],
    "total": 5
  }
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: permission:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[DEMO] === 4. ロール権限割り当てシステム デモ ===
[STEP] 4.1 システム管理者ロールに権限割り当て

━━━ 管理者ロール権限割り当て ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "id",
    "reason": "Invalid UUID format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 4.2 営業マネージャーロールに部分権限割り当て

━━━ 営業マネージャー権限割り当て ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "id",
    "reason": "Invalid UUID format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 4.3 ロール権限一覧確認（権限継承込み）

━━━ システム管理者の権限一覧 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "id",
    "reason": "Invalid UUID format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ 営業マネージャーの権限一覧 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "id",
    "reason": "Invalid UUID format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 4.4 権限を保有するロール一覧

━━━ ユーザー作成権限を持つロール ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "id",
    "reason": "Invalid UUID format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[DEMO] === 5. User管理・複数ロール割り当てシステム デモ ===
[STEP] 5.1 ユーザー作成

━━━ 営業マネージャーユーザー作成 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "request",
    "reason": "Invalid request format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ 一般ユーザー作成 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "request",
    "reason": "Invalid request format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 5.2 ユーザーへの複数ロール割り当て

━━━ 複数ロール割り当て（期限付き） ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "request",
    "reason": "Invalid request format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 5.3 ユーザーのロール一覧確認

━━━ 田中さんのロール一覧 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "user_id",
    "reason": "Invalid UUID format"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 5.4 ユーザー詳細取得（全権限表示）

━━━ ユーザー詳細（権限込み） ━━━
jq: parse error: Invalid numeric literal at line 1, column 3
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 5.5 ユーザー一覧取得（部署フィルタ）

━━━ 営業部ユーザー一覧 ━━━
{
  "code": "VALIDATION_ERROR",
  "message": "Validation failed",
  "details": {
    "field": "query",
    "reason": "Invalid query parameters"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[DEMO] === 6. 権限チェック・認証システム デモ ===
[STEP] 6.1 一般ユーザーでログイン
[WARNING] 一般ユーザーログインに失敗（ユーザーが作成されていない可能性）
[DEMO] === 7. システム統計・モニタリング デモ ===
[STEP] 7.1 権限マトリックス統計情報

━━━ 権限マトリックス統計 ━━━
{
  "modules": [
    {
      "name": "inventory",
      "display_name": "在庫管理",
      "actions": [
        {
          "name": "update",
          "display_name": "更新",
          "permission_id": "aeb06707-7198-49a1-a98b-0bdca4d0e0ba",
          "roles": null
        },
        {
          "name": "view",
          "display_name": "表示",
          "permission_id": "5eeee496-9a9b-4c01-8261-1770990ee5e7",
          "roles": null
        }
      ]
    },
    {
      "name": "orders",
      "display_name": "注文管理",
      "actions": [
        {
          "name": "approve",
          "display_name": "承認",
          "permission_id": "6f6e0538-0f9c-41a4-baca-92e04dc41de3",
          "roles": null
        },
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "b75e89b7-818e-4a25-ae33-05a586e6f330",
          "roles": null
        }
      ]
    },
    {
      "name": "permission",
      "display_name": "権限管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440023",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440009",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440019",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440007",
          "roles": [
            "システム管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440008",
          "roles": [
            "システム管理者"
          ]
        }
      ]
    },
    {
      "name": "reports",
      "display_name": "レポート",
      "actions": [
        {
          "name": "export",
          "display_name": "エクスポート",
          "permission_id": "7028fa00-b7b6-4c66-b3ab-1ccd211d8a49",
          "roles": null
        }
      ]
    },
    {
      "name": "role",
      "display_name": "ロール管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440022",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440006",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440018",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440004",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "一般ユーザー",
            "部門管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440005",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "部門管理者"
          ]
        }
      ]
    },
    {
      "name": "system",
      "display_name": "システム管理",
      "actions": [
        {
          "name": "admin",
          "display_name": "管理者",
          "permission_id": "770e8400-e29b-41d4-a716-446655440015",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440013",
          "roles": [
            "システム管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440014",
          "roles": [
            "システム管理者"
          ]
        }
      ]
    },
    {
      "name": "department",
      "display_name": "部署管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440021",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440012",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440017",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440010",
          "roles": [
            "ゲストユーザー",
            "システム管理者",
            "プロジェクトマネージャー",
            "一般ユーザー",
            "部門管理者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440011",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "部門管理者"
          ]
        }
      ]
    },
    {
      "name": "user",
      "display_name": "ユーザー管理",
      "actions": [
        {
          "name": "create",
          "display_name": "作成",
          "permission_id": "770e8400-e29b-41d4-a716-446655440020",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "delete",
          "display_name": "削除",
          "permission_id": "770e8400-e29b-41d4-a716-446655440003",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "list",
          "display_name": "一覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440016",
          "roles": [
            "システム管理者"
          ]
        },
        {
          "name": "read",
          "display_name": "閲覧",
          "permission_id": "770e8400-e29b-41d4-a716-446655440001",
          "roles": [
            "ゲストユーザー",
            "システム管理者",
            "プロジェクトマネージャー",
            "一般ユーザー",
            "部門管理者",
            "開発者"
          ]
        },
        {
          "name": "write",
          "display_name": "write",
          "permission_id": "770e8400-e29b-41d4-a716-446655440002",
          "roles": [
            "システム管理者",
            "プロジェクトマネージャー",
            "部門管理者"
          ]
        }
      ]
    }
  ],
  "summary": {
    "total_permissions": 28,
    "total_modules": 8,
    "total_actions": 10,
    "unused_permissions": 5
  }
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: permission:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 7.2 部署一覧（ユーザー数込み）

━━━ 部署一覧（統計情報） ━━━
{
  "departments": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "name": "IT部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    },
    {
      "id": "9b781d76-a935-477c-9cd3-81d7fdfbff68",
      "name": "デモ営業部",
      "parent_id": "52469d7e-4e1b-49ee-b72c-674f3ca5f7bc",
      "created_at": "2025-07-28T02:27:28+09:00",
      "parent": {
        "id": "52469d7e-4e1b-49ee-b72c-674f3ca5f7bc",
        "name": "デモ本社"
      }
    },
    {
      "id": "52469d7e-4e1b-49ee-b72c-674f3ca5f7bc",
      "name": "デモ本社",
      "created_at": "2025-07-28T02:27:28+09:00",
      "children": [
        {
          "id": "9b781d76-a935-477c-9cd3-81d7fdfbff68",
          "name": "デモ営業部"
        }
      ]
    },
    {
      "id": "00000000-0000-0000-0000-000000000001",
      "name": "ルート部門",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "00000000-0000-0000-0000-000000000004",
      "name": "人事部",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440002",
      "name": "人事部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    },
    {
      "id": "00000000-0000-0000-0000-000000000002",
      "name": "営業部",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440003",
      "name": "営業部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    },
    {
      "id": "00000000-0000-0000-0000-000000000003",
      "name": "経理部",
      "created_at": "2025-07-28T02:27:00+09:00"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440004",
      "name": "経理部門",
      "created_at": "2025-07-28T02:27:01+09:00"
    }
  ],
  "total": 10,
  "page": 1,
  "limit": 10
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: department:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 7.3 ロール一覧（権限数込み）

━━━ ロール一覧（権限統計） ━━━
{
  "roles": [
    {
      "id": "00000000-0000-0000-0000-000000000001",
      "name": "admin",
      "level": 0,
      "created_at": "2025-07-28T02:27:00+09:00",
      "children": [
        {
          "id": "00000000-0000-0000-0000-000000000002",
          "name": "manager",
          "level": 1
        }
      ],
      "user_count": 0
    },
    {
      "id": "00000000-0000-0000-0000-000000000003",
      "name": "employee",
      "parent_id": "00000000-0000-0000-0000-000000000002",
      "level": 2,
      "created_at": "2025-07-28T02:27:00+09:00",
      "parent": {
        "id": "00000000-0000-0000-0000-000000000002",
        "name": "manager",
        "level": 1
      },
      "user_count": 0
    },
    {
      "id": "00000000-0000-0000-0000-000000000002",
      "name": "manager",
      "parent_id": "00000000-0000-0000-0000-000000000001",
      "level": 1,
      "created_at": "2025-07-28T02:27:00+09:00",
      "parent": {
        "id": "00000000-0000-0000-0000-000000000001",
        "name": "admin",
        "level": 0
      },
      "children": [
        {
          "id": "00000000-0000-0000-0000-000000000003",
          "name": "employee",
          "level": 2
        }
      ],
      "user_count": 0
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440004",
      "name": "ゲストユーザー",
      "parent_id": "660e8400-e29b-41d4-a716-446655440003",
      "level": 3,
      "created_at": "2025-07-28T02:27:01+09:00",
      "parent": {
        "id": "660e8400-e29b-41d4-a716-446655440003",
        "name": "一般ユーザー",
        "level": 2
      },
      "permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited": false
        }
      ],
      "inherited_permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440021",
          "module": "department",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440012",
          "module": "department",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440017",
          "module": "department",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440003",
          "from_role_name": "一般ユーザー"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440023",
          "module": "permission",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440009",
          "module": "permission",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440019",
          "module": "permission",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440007",
          "module": "permission",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440008",
          "module": "permission",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440022",
          "module": "role",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440006",
          "module": "role",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440018",
          "module": "role",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440003",
          "from_role_name": "一般ユーザー"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440015",
          "module": "system",
          "action": "admin",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440013",
          "module": "system",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440014",
          "module": "system",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440020",
          "module": "user",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440003",
          "module": "user",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440016",
          "module": "user",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440003",
          "from_role_name": "一般ユーザー"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        }
      ],
      "user_count": 2
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440001",
      "name": "システム管理者",
      "level": 0,
      "created_at": "2025-07-28T02:27:01+09:00",
      "children": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440002",
          "name": "部門管理者",
          "level": 1
        }
      ],
      "permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440003",
          "module": "user",
          "action": "delete",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440006",
          "module": "role",
          "action": "delete",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440007",
          "module": "permission",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440008",
          "module": "permission",
          "action": "write",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440009",
          "module": "permission",
          "action": "delete",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440012",
          "module": "department",
          "action": "delete",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440013",
          "module": "system",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440014",
          "module": "system",
          "action": "write",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440015",
          "module": "system",
          "action": "admin",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440016",
          "module": "user",
          "action": "list",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440017",
          "module": "department",
          "action": "list",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440018",
          "module": "role",
          "action": "list",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440019",
          "module": "permission",
          "action": "list",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440020",
          "module": "user",
          "action": "create",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440021",
          "module": "department",
          "action": "create",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440022",
          "module": "role",
          "action": "create",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440023",
          "module": "permission",
          "action": "create",
          "inherited": false
        }
      ],
      "user_count": 2
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440006",
      "name": "テスター",
      "parent_id": "660e8400-e29b-41d4-a716-446655440002",
      "level": 2,
      "created_at": "2025-07-28T02:27:01+09:00",
      "parent": {
        "id": "660e8400-e29b-41d4-a716-446655440002",
        "name": "部門管理者",
        "level": 1
      },
      "inherited_permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440021",
          "module": "department",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440012",
          "module": "department",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440017",
          "module": "department",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440023",
          "module": "permission",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440009",
          "module": "permission",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440019",
          "module": "permission",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440007",
          "module": "permission",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440008",
          "module": "permission",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440022",
          "module": "role",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440006",
          "module": "role",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440018",
          "module": "role",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440015",
          "module": "system",
          "action": "admin",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440013",
          "module": "system",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440014",
          "module": "system",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440020",
          "module": "user",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440003",
          "module": "user",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440016",
          "module": "user",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        }
      ],
      "user_count": 1
    },
    {
      "id": "ef6b554b-1b8d-422c-a6cb-7b90918eb430",
      "name": "デモシステム管理者",
      "level": 0,
      "created_at": "2025-07-28T02:27:28+09:00",
      "children": [
        {
          "id": "d863af92-702b-4f5f-9e98-6de495673533",
          "name": "デモ営業マネージャー",
          "level": 1
        }
      ],
      "user_count": 0
    },
    {
      "id": "d863af92-702b-4f5f-9e98-6de495673533",
      "name": "デモ営業マネージャー",
      "parent_id": "ef6b554b-1b8d-422c-a6cb-7b90918eb430",
      "level": 1,
      "created_at": "2025-07-28T02:27:28+09:00",
      "parent": {
        "id": "ef6b554b-1b8d-422c-a6cb-7b90918eb430",
        "name": "デモシステム管理者",
        "level": 0
      },
      "user_count": 0
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440007",
      "name": "プロジェクトマネージャー",
      "parent_id": "660e8400-e29b-41d4-a716-446655440002",
      "level": 2,
      "created_at": "2025-07-28T02:27:01+09:00",
      "parent": {
        "id": "660e8400-e29b-41d4-a716-446655440002",
        "name": "部門管理者",
        "level": 1
      },
      "permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited": false
        }
      ],
      "inherited_permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440021",
          "module": "department",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440012",
          "module": "department",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440017",
          "module": "department",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440023",
          "module": "permission",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440009",
          "module": "permission",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440019",
          "module": "permission",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440007",
          "module": "permission",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440008",
          "module": "permission",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440022",
          "module": "role",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440006",
          "module": "role",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440018",
          "module": "role",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440015",
          "module": "system",
          "action": "admin",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440013",
          "module": "system",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440014",
          "module": "system",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440020",
          "module": "user",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440003",
          "module": "user",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440016",
          "module": "user",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        }
      ],
      "user_count": 2
    },
    {
      "id": "660e8400-e29b-41d4-a716-446655440003",
      "name": "一般ユーザー",
      "parent_id": "660e8400-e29b-41d4-a716-446655440002",
      "level": 2,
      "created_at": "2025-07-28T02:27:01+09:00",
      "parent": {
        "id": "660e8400-e29b-41d4-a716-446655440002",
        "name": "部門管理者",
        "level": 1
      },
      "children": [
        {
          "id": "660e8400-e29b-41d4-a716-446655440004",
          "name": "ゲストユーザー",
          "level": 3
        }
      ],
      "permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited": false
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited": false
        }
      ],
      "inherited_permissions": [
        {
          "id": "770e8400-e29b-41d4-a716-446655440021",
          "module": "department",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440012",
          "module": "department",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440017",
          "module": "department",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440010",
          "module": "department",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440011",
          "module": "department",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440023",
          "module": "permission",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440009",
          "module": "permission",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440019",
          "module": "permission",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440007",
          "module": "permission",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440008",
          "module": "permission",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440022",
          "module": "role",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440006",
          "module": "role",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440018",
          "module": "role",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440004",
          "module": "role",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440005",
          "module": "role",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440015",
          "module": "system",
          "action": "admin",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440013",
          "module": "system",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440014",
          "module": "system",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440020",
          "module": "user",
          "action": "create",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440003",
          "module": "user",
          "action": "delete",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440016",
          "module": "user",
          "action": "list",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440001",
          "module": "user",
          "action": "read",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440002",
          "from_role_name": "部門管理者"
        },
        {
          "id": "770e8400-e29b-41d4-a716-446655440002",
          "module": "user",
          "action": "write",
          "inherited_from": "660e8400-e29b-41d4-a716-446655440001",
          "from_role_name": "システム管理者"
        }
      ],
      "user_count": 4
    }
  ],
  "total": 12,
  "page": 1,
  "limit": 10
}
{
  "code": "AUTHORIZATION_ERROR",
  "message": "Authorization failed",
  "details": {
    "reason": "Missing required permission: role:list"
  }
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[STEP] 7.4 システムヘルスチェック

━━━ ヘルスチェック ━━━
{
  "service": "erp-access-control-api",
  "status": "healthy",
  "timestamp": "2025-07-27T17:55:54Z",
  "version": "0.1.0-dev"
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━


━━━ バージョン情報 ━━━
{
  "message": "API実装準備完了 - 複数ロール対応",
  "service": "ERP Access Control API",
  "status": "development",
  "version": "0.1.0-dev"
}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━



=============================================================================
                         デモンストレーション完了！
=============================================================================


🎊 実演した機能:
  ✅ 階層構造を持つ部署管理
  ✅ 権限継承付きロール管理
  ✅ 詳細な権限管理とマトリックス表示
  ✅ 複数ロール・期限付きロール割り当て
  ✅ JWT認証・権限チェック
  ✅ 包括的なユーザー管理
  ✅ リアルタイム統計・モニタリング

📈 実装済みAPI数: 30+ RESTful エンドポイント
🔒 セキュリティ: JWT認証 + 権限ベースアクセス制御
🎯 品質: エンタープライズグレード（200+テストケース）

📚 APIドキュメント: http://localhost:8080/
🏥 ヘルスチェック: http://localhost:8080/health

[SUCCESS] ERP Access Control API 権限管理システムデモ完了
erp-access-control-go % 
